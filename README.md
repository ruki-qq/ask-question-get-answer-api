# ask-question-get-answer-api

## Запуск тестов

Для запуска тестов необходимо установить dev зависимости:

```bash
pip install -e ".[dev]"
```

Или если используется poetry:

```bash
poetry install --with dev
```

Затем запустить тесты:

```bash
pytest
```

Для запуска с покрытием кода:

```bash
pytest --cov=src --cov-report=html
```

### Тесты покрывают:

- **Questions API:**
  - GET /api/questions/ - список всех вопросов
  - POST /api/questions/ - создание вопроса
  - GET /api/questions/{id} - получение вопроса с ответами
  - DELETE /api/questions/{id} - удаление вопроса (с каскадным удалением ответов)
  - POST /api/questions/{id}/answers/ - создание ответа (требует аутентификации)

- **Answers API:**
  - GET /api/answers/{id} - получение ответа
  - DELETE /api/answers/{id} - удаление ответа (требует аутентификации, только свои ответы)

- **Логика:**
  - Каскадное удаление ответов при удалении вопроса
  - Аутентификация для создания и удаления ответов
  - Авторизация (пользователи могут удалять только свои ответы)
  - Валидация данных
  - Обработка ошибок (404, 401, 403, 422)